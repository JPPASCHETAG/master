<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<link href="../assets/font_awesome/css/all.css" rel="stylesheet">
	<script>
	var count = 0;

	function myFunction() {
		var x = document.getElementById("myTopnav");
		if (x.className === "topnav") {
			x.className += " responsive";
		} else {
			x.className = "topnav";
		}
	}

	//um verschiedene Prameter zu finden
	function findGetParameter(parameterName) {
		var result = null,
				tmp = [];
		location.search
				.substr(1)
				.split("&")
				.forEach(function (item) {
					tmp = item.split("=");
					if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
				});
		return result;
	}
	
		$("document").ready(function(){



			if(findGetParameter("MODE") == "MAIN"){

				$("table").css("margin-top","-300px");
				$("body").prepend("<div class=\"topspalte\">\n" +
						"\n" +
						"<h1>Saufen leicht gemacht!</h1>\n" +
						"\n" +
						"<h4>Von Säufern für Säufer</h4>\n" +
						"\n" +
						"</div><div class=\"topnav\" id=\"myTopnav\">\n" +
						"    <a href=\"#home\" class=\"active\">Home</a>\n" +
						"    <a href=\"WIP.html\">Aktuelle Spiele in Arbeit</a>\n" +
						"    <div class=\"dropdown\">\n" +
						"        <button class=\"dropbtn\">Die Spiele\n" +
						"            <i class=\"fas fa-caret-down\"></i>\n" +
						"        </button>\n" +
						"        <div class=\"dropdown-content\">\n" +
						"            <a href=\"CoinToss.html?MODE=MAIN\">Münze werfen</a>\n" +
						"            <a href=\"ReactionTest.html?MODE=MAIN\">Reaktionstest</a>\n" +
						"            <a href=\"PferdeRennen.html?MODE=MAIN\">Pferderennen</a>\n" +
						"            <a href=\"../index.php\">Sauf und ärger dich nicht</a>\n" +
						"        </div>\n" +
						"    </div>\n" +
						"    <a href=\"../index.php\">Sauf und ärger dich nicht!</a>\n" +
						"    <a href=\"javascript:void(0);\" style=\"font-size:15px;\" class=\"icon\" onclick=\"myFunction()\">&#9776;</a>\n" +
						"</div>");

				$("head").append( '<link rel="stylesheet" href="../CSS/main.css">');
			}

				$(".feld").click(function(event){
					var id = event.target.id;
					if(count == 0){
						if($("#"+id).text() == ""){
							$("#"+id).text("X");
						}else{return}
					}else{
						if($("#"+id).text() == ""){
							$("#"+id).text("O");
						}else{return}
					}

					checkForWin();
					
					if(count == 1){
						count = 0;
					}else{
						count++;	
					}
				})
			
			});
			
	function reset(){
		$(".feld").each(function(){
			$(this).text("");
		});
	}
	
	function checkForWin(){
		
		var array = [];
		
		$(".feld").each(function(){
			array.push($(this).text());
		});
		
		if((array[0] == "X" && array[1] == "X" && array[2] == "X") || (array[3] == "X" && array[4] == "X" && array[5] == "X") || (array[6] == "X" && array[7] == "X" && array[8] == "X")){
		alert("X hat gewonnen!");
		reset();
		} else if((array[0] == "O" && array[1] == "O" && array[2] == "O") || (array[3] == "O" && array[4] == "O" && array[5] == "O") || (array[6] == "O" && array[7] == "O" && array[8] == "O")){
		alert("o hat gewonnen!");
		reset();
		} else if((array[0] == "X" && array[4] == "X" && array[8] == "X") || (array[2] == "X" && array[4] == "X" && array[6] == "X")){
		alert("X hat gewonnen!");
		reset();
		} else if((array[0] == "O" && array[4] == "O" && array[8] == "O") || (array[2] == "O" && array[4] == "O" && array[6] == "O")){
		alert("O hat gewonnen!");
		reset();
		} else if((array[0] == "X" && array[3] == "X" && array[6] == "X") || (array[1] == "X" && array[4] == "X" && array[7] == "X") || (array[2] == "X" && array[5] == "X" && array[8] == "X")){
		alert("X hat gewonnen!");
		reset();
		} else if((array[0] == "O" && array[3] == "O" && array[6] == "O") || (array[1] == "O" && array[4] == "O" && array[7] == "O") || (array[2] == "O" && array[5] == "O" && array[8] == "O")){
		alert("o hat gewonnen!");
		reset();
		}else if(array.indexOf("") == -1){
		alert("Untentschieden!");
		reset();
		}
		
	}
	
	
	</script>
	<style>
		table {
		width: 300px;
		height: 300px;
		position: fixed;
		margin-left: -150px;
		margin-top: -150px;
		top: 50%;
		left: 50%;
		}
	
		table td{
			width: 100px;
			height: 100px;
			border: 1px solid black;
			text-align: center;
			border-radius: 20px;
		}
	</style>
</head>
<body>
	<div>
		<table>
			<tr>
			<td id="1" class="feld" ></td>
			<td id="2" class="feld" ></td>
			<td id="3" class="feld" ></td>
			<tr>
			<tr>
			<td id="4" class="feld" ></td>
			<td id="5" class="feld" ></td>
			<td id="6" class="feld" ></td>
			<tr>
			<tr>
			<td id="7" class="feld" ></td>
			<td id="8" class="feld" ></td>
			<td id="9" class="feld" ></td>
			<tr>
		</table>
	</div>
</body>